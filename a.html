<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø¢Ù„Ø§Ù…</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap">
  <style>
    :root {
      --primary: #6D4C41;
      --secondary: #8D6E63;
      --accent: #D7CCC8;
      --text: #3E2723;
      --light: #EFEBE9;
      --dark: #4E342E;
      --correct: #4CAF50;
      --wrong: #F44336;
      --hint: #FFC107;
      --option-bg: #FFFFFF;
      --option-text: #3E2723;
      --option-border: #DDDDDD;
    }
      
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Tajawal', sans-serif;
      background-color: var(--light);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
    }
    
    body.dark {
      background: url('https://png.pngtree.com/background/20230611/original/pngtree-cross-is-on-top-of-a-hill-next-to-the-dark-picture-image_3161459.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
       --option-bg: rgba(255, 255, 255, 0.1);
      --option-text: #FFFFFF;
      --option-border: rgba(255, 255, 255, 0.2);
    }
    
    .container {
      width: 100%;
      max-width: 800px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      transition: all 0.3s ease;
    }
    
    body.dark .container {
      background: rgba(0, 0, 0, 0.85);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
    }
    
    .theme-toggle {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      z-index: 100;
    }
    
    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(30deg);
    }
    
    /* Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø² ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± */
    .logos {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px 0;
    }
    
    .logos img {
      height: 80px;
      object-fit: contain;
      border-radius: 8px;
    }
    
    h1, h2 {
      font-weight: 700;
      margin-bottom: 15px;
    }
    
    .content {
      padding: 25px;
    }
    
    input {
      width: 100%;
      padding: 12px 15px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-family: 'Tajawal', sans-serif;
      font-size: 16px;
      transition: border 0.3s;
    }
    
    input:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-family: 'Tajawal', sans-serif;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn:hover {
      background: var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .btn-outline {
      background: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
    }
    
    .btn-outline:hover {
      background: rgba(109, 76, 65, 0.1);
    }
    
    .rules-list {
      list-style-type: none;
      margin: 20px 0;
    }
    
    .rules-list li {
      padding: 10px 0;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .rules-list li:before {
      content: "â€¢";
      color: var(--primary);
      font-size: 24px;
    }
    
    .game-stats {
      display: flex;
      justify-content: space-between;
      background: var(--accent);
      padding: 12px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .stat {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .progress-container {
      width: 100%;
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      margin: 15px 0;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 100%;
      transition: width 0.3s;
    }
    
    .question-container {
      margin: 20px 0;
    }
    
    .question-image {
      width: 100%;
      max-height: 250px;
      object-fit: contain;
      border-radius: 8px;
      margin: 15px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin: 20px 0;
    }
    
.option {
      background: var(--option-bg);
      color: var(--option-text);
      border: 1px solid var(--option-border);
      border-radius: 8px;
      padding: 15px;
      text-align: right;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .option:hover {
      border-color: var(--primary);
      background: rgba(109, 76, 65, 0.1);
    }

    .option.correct {
      background: rgba(76, 175, 80, 0.1);
      border-color: var(--correct);
    }
    
    .option.wrong {
      background: rgba(244, 67, 54, 0.1);
      border-color: var(--wrong);
    }
    
    .hint-container {
      background: rgba(255, 193, 7, 0.1);
      border: 1px dashed var(--hint);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
    }
    
    .feedback {
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }
    
    .feedback.correct {
      background: rgba(76, 175, 80, 0.1);
      border-left: 4px solid var(--correct);
    }
    
    .feedback.wrong {
      background: rgba(244, 67, 54, 0.1);
      border-left: 4px solid var(--wrong);
    }
    
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
      flex-direction: row-reverse; 

    }
    
    .hidden {
      display: none;
    }
    
    @media (max-width: 768px) {
      .container {
        border-radius: 0;
      }
      
      .logos img {
        height: 60px;
      }
      
      .game-stats {
        flex-direction: column;
        gap: 10px;
      }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-5px); }
      40%, 80% { transform: translateX(5px); }
    }
    
    .shake {
      animation: shake 0.5s;
    }
  </style>
</head>
<body class="light">
  <div class="container">
    <div class="header">
      <button class="theme-toggle" id="themeToggle">ğŸŒ™</button>
      <div class="logos">
        <img src="1.png" alt="Logo 1">
        <img src="2.jpg" alt="Logo 2">
        <img src="3.png" alt="Logo 3">

      </div>
      <h1>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø¢Ù„Ø§Ù…</h1>
    </div>

    <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙƒÙˆØ¯ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± -->
    <div id="welcome" class="content">
      <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ ÙˆÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</p>
      <input type="text" id="teamName" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚">
      <input type="password" id="teamCode" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Ø¯Ù…">
      <button class="btn" onclick="goToRules()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
    </div>

    <!-- Rules Page -->
    <div id="rules" class="content hidden">
      <h2>Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</h2>
      <ul class="rules-list">
        <li>Ù„Ø¯ÙŠÙƒ ÙˆÙ‚Øª Ù…Ø­Ø¯Ø¯ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</li>
        <li>ØªÙ…ØªÙ„Ùƒ 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙÙ‚Ø· Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©</li>
        <li>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø© ØªØ®ÙØ¶ Ø§Ù„ÙˆÙ‚Øª Ø£Ùˆ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</li>
        <li>ÙƒÙ„ Ø³Ø¤Ø§Ù„ Ù„Ù‡ Ù†Ù‚Ø§Ø·ØŒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ù† Ø£ÙˆÙ„ Ù…Ø±Ø© ØªØ¹Ø·ÙŠÙƒ Ø§Ù„Ù†Ù‚Ø§Ø· ÙƒØ§Ù…Ù„Ø©</li>
        <li>Ø¨Ø¹Ø¯ ÙƒÙ„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ØªØ¸Ù‡Ø± Ù…Ù„Ø§Ø­Ø¸Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©</li>
        <li>ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØ´Ù ØªÙ„Ù…ÙŠØ­ Ù…Ù‚Ø§Ø¨Ù„ Ø®ØµÙ… Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„ÙˆÙ‚Øª</li>
      </ul>
      <button class="btn" onclick="startGame()">Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
    </div>

    <!-- Game Page -->
    <div id="game" class="content hidden">
      <div class="game-stats">
        <div class="stat">
          â³ <span id="time">120</span> Ø«Ø§Ù†ÙŠØ©
        </div>
        <div class="stat">
          â¤ï¸ <span id="livesCount">3</span> Ù…Ø­Ø§ÙˆÙ„Ø§Øª
        </div>
        <div class="stat">
          â­ <span id="score">0</span> Ù†Ù‚Ø§Ø·
        </div>
      </div>
      
      <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
      </div>
      
      <div class="question-container">
        <h2 id="questionText"></h2>
        <img id="questionImage" class="question-image hidden" alt="ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„">
        <p>Ø§Ù„Ù†Ù‚Ø§Ø·: <strong id="questionPoints"></strong></p>
        
        <div class="options" id="options"></div>
        
        <button id="hintBtn" class="btn btn-outline" onclick="showHint()">
          ğŸ” ÙƒØ´Ù ØªÙ„Ù…ÙŠØ­ (-15 Ø«Ø§Ù†ÙŠØ©)
        </button>
        
        <div id="hint" class="hint-container hidden"></div>
        
        <div id="feedback" class="feedback hidden"></div>
      </div>
      
      <div class="nav-buttons">
        <button id="prevBtn" class="btn btn-outline hidden" onclick="prevQuestion()">
          Ø§Ù„Ø³Ø§Ø¨Ù‚
        </button>
        <button id="nextBtn" class="btn hidden" onclick="nextQuestion()">
          Ø§Ù„ØªØ§Ù„ÙŠ
        </button>
        <button id="finishBtn" class="btn hidden" onclick="confirmEnd()">
          Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©
        </button>
      </div>
    </div>

    <!-- End Page -->
    <div id="end" class="content hidden">
      <h2>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©!</h2>
      <div id="finalScore" style="margin: 25px 0;"></div>
      <button class="btn" onclick="reviewQuestions()">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
      <button class="btn btn-outline" onclick="location.reload()">Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>
  </div>

  <script>
    // Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
    const questions = [
      {
        text: "ÙÙŠ ÙŠÙˆÙ… Ø£Ø­Ø¯ Ø§Ù„Ø´Ø¹Ø§Ù†ÙŠÙ†ØŒ Ø¯Ø®Ù„ Ø§Ù„Ù…Ø³ÙŠØ­ Ø£ÙˆØ±Ø´Ù„ÙŠÙ… Ø±Ø§ÙƒØ¨Ù‹Ø§ Ø¹Ù„Ù‰:",
        options: ["Ø­ØµØ§Ù†", "Ø¬Ù…Ù„", "Ø¬Ø­Ø´", "Ø¹Ø±Ø¨Ø©"],
        answer: 2,
        note: "Ø¯Ø®Ù„ Ø§Ù„Ù…Ø³ÙŠØ­ Ø£ÙˆØ±Ø´Ù„ÙŠÙ… Ø±Ø§ÙƒØ¨Ù‹Ø§ Ø¹Ù„Ù‰ Ø¬Ø­Ø´ Ù„ÙŠØ¹Ù„Ù† ØªÙˆØ§Ø¶Ø¹Ù‡.",
        hint: "ÙÙƒÙ‘Ø± ÙÙŠ Ø±Ù…Ø² Ø§Ù„ØªÙˆØ§Ø¶Ø¹ Ù„Ø§ Ø§Ù„Ù‚ÙˆØ©.",
        points: 10,
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMRw9vIKLxybMKIm_A-rO8gIAsPheQhyWVdg&s"
      },
      {
        text: "Ø±ØªØ¨ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«: (Ø£) Ø§Ù„Ø¹Ø´Ø§Ø¡ Ø§Ù„Ø£Ø®ÙŠØ± (Ø¨) Ø§Ù„Ù‚Ø¨Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ÙŠØ­ (Ø¬) ØºØ³Ù„ Ø§Ù„Ø£Ø±Ø¬Ù„",
        options: ["Ø£-Ø¨-Ø¬", "Ø¬-Ø£-Ø¨", "Ø¨-Ø£-Ø¬", "Ø£-Ø¬-Ø¨"],
        answer: 1,
        note: "Ø§Ù„Ù…Ø³ÙŠØ­ ØºØ³Ù„ Ø§Ù„Ø£Ø±Ø¬Ù„ Ø«Ù… Ø§Ù„Ø¹Ø´Ø§Ø¡ Ø§Ù„Ø£Ø®ÙŠØ± Ø«Ù… Ø§Ù„Ù‚Ø¨Ø¶ Ø¹Ù„ÙŠÙ‡.",
        hint: "ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ø®Ø¯Ù…Ø© ÙˆØ§Ù„ØªÙˆØ§Ø¶Ø¹ Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ø´Ø§Ø¡.",
        points: 20,
        image: ""
      },
      {
        text: "ÙÙŠ ÙˆØ³Ø· Ø§Ù„ÙƒÙ†ÙŠØ³Ø© Ø®Ù„Ø§Ù„ Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø¢Ù„Ø§Ù…ØŒ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ÙŠØ­ Ù…Ø¹ 3 Ø´Ù…ÙˆØ¹... Ù…Ø§ Ù…Ø¹Ù†Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù…ÙˆØ¹ØŸ",
        options: [
          "Ø¨Ø§ÙƒØ± â€“ ØªØ³Ø¨Ø­Ø© â€“ Ù…Ø²Ù…ÙˆØ±",
          "Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ù‚Ø¯ÙŠÙ… â€“ Ø§Ù„Ù…Ø²Ø§Ù…ÙŠØ± â€“ Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯",
          "Ø§Ù„ÙƒÙ†ÙŠØ³Ø© â€“ Ø§Ù„Ø´Ø¹Ø¨ â€“ Ø§Ù„ÙƒØ§Ù‡Ù†",
          "Ø§Ù„Ø¢Ù„Ø§Ù… â€“ Ø§Ù„Ù‚ÙŠØ§Ù…Ø© â€“ Ø§Ù„ØªØ¬Ø³Ø¯"
        ],
        answer: 1,
        note: "ØªÙ…Ø«Ù„ Ø§Ù„Ø´Ù…ÙˆØ¹ Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…ØŒ Ø§Ù„Ù…Ø²Ø§Ù…ÙŠØ±ØŒ ÙˆØ§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯.",
        hint: "ØªØ®ÙŠÙ„ ÙƒØªØ§Ø¨ ÙÙŠÙ‡ 3 Ø£Ø¨ÙˆØ§Ø¨: Ø§Ù„Ø£ÙˆÙ„ ÙˆØ¹ÙˆØ¯ Ø§Ù„Ù„Ù‡ØŒ Ø§Ù„Ø«Ø§Ù†ÙŠ ØªØ³Ø¨ÙŠØ­ØŒ Ø§Ù„Ø«Ø§Ù„Ø« Ù…Ø¬ÙŠØ¡ Ø§Ù„Ù…Ø®Ù„Øµ.",
        points: 15,
        image: ""
      }
    ];

    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    let currentQuestion = 0;
    let score = 0;
    let lives = 3;
    let totalTime = 120;
    let time = totalTime;
    let timer;
    let teamName = "";
    let teamCode = "";
    let answeredCorrectly = Array(questions.length).fill(false);
    let firstAttempt = Array(questions.length).fill(true);
    let usedHint = Array(questions.length).fill(false);

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø©
    const themeToggle = document.getElementById('themeToggle');
    
    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      document.body.classList.toggle('light');
      themeToggle.textContent = document.body.classList.contains('dark') ? 'ğŸŒ' : 'ğŸŒ™';
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
      document.body.classList.remove('light');
      themeToggle.textContent = 'ğŸŒ';
    } else {
      document.body.classList.add('light');
      document.body.classList.remove('dark');
      themeToggle.textContent = 'ğŸŒ™';
    }

    // Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±
    function goToRules() {
      teamName = document.getElementById('teamName').value.trim();
      teamCode = document.getElementById('teamCode').value.trim();
      
      if (!teamName) {
        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚');
        return;
      }
      
      document.getElementById('welcome').classList.add('hidden');
      document.getElementById('rules').classList.remove('hidden');
    }
    
    function startGame() {
      document.getElementById('rules').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      loadQuestion();
      startTimer();
    }
    
    function startTimer() {
      clearInterval(timer);
      timer = setInterval(() => {
        time--;
        updateGameStats();
        
        if (time <= 0) {
          endGame();
        }
      }, 1000);
    }
    
    function updateGameStats() {
      document.getElementById('time').textContent = time;
      document.getElementById('livesCount').textContent = lives;
      document.getElementById('score').textContent = score;
      document.getElementById('progress').style.width = `${(time / totalTime) * 100}%`;
    }
    
    function loadQuestion() {
      const q = questions[currentQuestion];
      const questionEl = document.getElementById('questionText');
      const optionsEl = document.getElementById('options');
      const imageEl = document.getElementById('questionImage');
      
      questionEl.textContent = q.text;
      document.getElementById('questionPoints').textContent = q.points;
      
      if (q.image) {
        imageEl.src = q.image;
        imageEl.classList.remove('hidden');
      } else {
        imageEl.classList.add('hidden');
      }
      
      optionsEl.innerHTML = '';
      q.options.forEach((option, index) => {
        const optionEl = document.createElement('div');
        optionEl.classList.add('option');
        optionEl.textContent = option;
        optionEl.onclick = () => checkAnswer(index, optionEl);
        optionsEl.appendChild(optionEl);
      });
      
      document.getElementById('hint').classList.add('hidden');
      document.getElementById('feedback').classList.add('hidden');
      document.getElementById('hintBtn').disabled = answeredCorrectly[currentQuestion] || usedHint[currentQuestion];
      
      updateNavButtons();
    }
    
    function checkAnswer(selectedIndex, optionEl) {
      const q = questions[currentQuestion];
      const feedbackEl = document.getElementById('feedback');
      
      if (selectedIndex === q.answer) {
        // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
        optionEl.classList.add('correct');
        feedbackEl.textContent = q.note;
        feedbackEl.classList.add('correct');
        feedbackEl.classList.remove('hidden');
        
        if (!answeredCorrectly[currentQuestion]) {
          const points = firstAttempt[currentQuestion] ? q.points : Math.floor(q.points / 2);
          score += points;
          answeredCorrectly[currentQuestion] = true;
          updateGameStats();
        }
        
        disableOptions();
      } else {
        // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
        optionEl.classList.add('wrong');
        document.querySelector('.container').classList.add('shake');
        setTimeout(() => {
          document.querySelector('.container').classList.remove('shake');
        }, 500);
        
        firstAttempt[currentQuestion] = false;
        lives--;
        time -= 10;
        
        if (lives <= 0) {
          endGame();
        }
        
        updateGameStats();
      }
      
      updateNavButtons();
    }
    
    function disableOptions() {
      document.querySelectorAll('.option').forEach(opt => {
        opt.style.pointerEvents = 'none';
      });
    }
    
    function showHint() {
      if (usedHint[currentQuestion] || answeredCorrectly[currentQuestion]) return;
      
      time -= 15;
      if (time < 0) time = 0;
      
      usedHint[currentQuestion] = true;
      document.getElementById('hint').textContent = questions[currentQuestion].hint;
      document.getElementById('hint').classList.remove('hidden');
      document.getElementById('hintBtn').disabled = true;
      
      updateGameStats();
    }
    
    function updateNavButtons() {
      document.getElementById('prevBtn').classList.toggle('hidden', currentQuestion === 0);
      document.getElementById('nextBtn').classList.toggle('hidden', 
        !answeredCorrectly[currentQuestion] || currentQuestion === questions.length - 1);
      document.getElementById('finishBtn').classList.toggle('hidden', 
        currentQuestion !== questions.length - 1 || !answeredCorrectly[currentQuestion]);
    }
    
    function nextQuestion() {
      currentQuestion++;
      loadQuestion();
    }
    
    function prevQuestion() {
      currentQuestion--;
      loadQuestion();
    }
    
    function confirmEnd() {
      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø¢Ù†ØŸ')) {
        endGame();
      }
    }
    
    function endGame() {
      clearInterval(timer);
      
      const totalPoints = questions.reduce((sum, q) => sum + q.points, 0);
      const finalScoreEl = document.getElementById('finalScore');
      
      finalScoreEl.innerHTML = `
        <p><strong>Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚:</strong> ${teamName}</p>
        <p><strong>Ø§Ù„Ù†Ù‚Ø§Ø·:</strong> ${score} Ù…Ù† ${totalPoints}</p>
        <p><strong>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</strong> ${time} Ø«Ø§Ù†ÙŠØ©</p>
        <p><strong>Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</strong> ${lives}</p>
      `;
      
      document.getElementById('game').classList.add('hidden');
      document.getElementById('end').classList.remove('hidden');
    }
    
    function reviewQuestions() {
      document.getElementById('end').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      currentQuestion = 0;
      loadQuestion();
    }
  </script>
</body>
</html>
