<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مسابقة أسبوع الآلام</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap">
  <style>
    :root {
      --primary: #6D4C41;
      --secondary: #8D6E63;
      --accent: #D7CCC8;
      --text: #3E2723;
      --light: #EFEBE9;
      --dark: #4E342E;
      --correct: #4CAF50;
      --wrong: #F44336;
      --hint: #FFC107;
      --option-bg: #FFFFFF;
      --option-text: #3E2723;
      --option-border: #DDDDDD;
    }
      
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Tajawal', sans-serif;
      background-color: var(--light);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
    }
    
    body.dark {
      background: url('https://png.pngtree.com/background/20230611/original/pngtree-cross-is-on-top-of-a-hill-next-to-the-dark-picture-image_3161459.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
       --option-bg: rgba(255, 255, 255, 0.1);
      --option-text: #FFFFFF;
      --option-border: rgba(255, 255, 255, 0.2);
    }
    
    .container {
      width: 100%;
      max-width: 800px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      transition: all 0.3s ease;
    }
    
    body.dark .container {
      background: rgba(0, 0, 0, 0.85);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
    }
    
    .theme-toggle {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      z-index: 100;
    }
    
    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(30deg);
    }
    
    /* باقي الستايلز كما هي بدون تغيير */
    .logos {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px 0;
    }
    
    .logos img {
      height: 80px;
      object-fit: contain;
      border-radius: 8px;
    }
    
    h1, h2 {
      font-weight: 700;
      margin-bottom: 15px;
    }
    
    .content {
      padding: 25px;
    }
    
    input {
      width: 100%;
      padding: 12px 15px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-family: 'Tajawal', sans-serif;
      font-size: 16px;
      transition: border 0.3s;
    }
    
    input:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-family: 'Tajawal', sans-serif;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn:hover {
      background: var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .btn-outline {
      background: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
    }
    
    .btn-outline:hover {
      background: rgba(109, 76, 65, 0.1);
    }
    
    .rules-list {
      list-style-type: none;
      margin: 20px 0;
    }
    
    .rules-list li {
      padding: 10px 0;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .rules-list li:before {
      content: "•";
      color: var(--primary);
      font-size: 24px;
    }
    
    .game-stats {
      display: flex;
      justify-content: space-between;
      background: var(--accent);
      padding: 12px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .stat {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .progress-container {
      width: 100%;
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      margin: 15px 0;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 100%;
      transition: width 0.3s;
    }
    
    .question-container {
      margin: 20px 0;
    }
    
    .question-image {
      width: 100%;
      max-height: 250px;
      object-fit: contain;
      border-radius: 8px;
      margin: 15px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin: 20px 0;
    }
    
.option {
      background: var(--option-bg);
      color: var(--option-text);
      border: 1px solid var(--option-border);
      border-radius: 8px;
      padding: 15px;
      text-align: right;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .option:hover {
      border-color: var(--primary);
      background: rgba(109, 76, 65, 0.1);
    }

    .option.correct {
      background: rgba(76, 175, 80, 0.1);
      border-color: var(--correct);
    }
    
    .option.wrong {
      background: rgba(244, 67, 54, 0.1);
      border-color: var(--wrong);
    }
    
    .hint-container {
      background: rgba(255, 193, 7, 0.1);
      border: 1px dashed var(--hint);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
    }
    
    .feedback {
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }
    
    .feedback.correct {
      background: rgba(76, 175, 80, 0.1);
      border-left: 4px solid var(--correct);
    }
    
    .feedback.wrong {
      background: rgba(244, 67, 54, 0.1);
      border-left: 4px solid var(--wrong);
    }
    
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
      flex-direction: row-reverse; 

    }
    
    .hidden {
      display: none;
    }
    
    @media (max-width: 768px) {
      .container {
        border-radius: 0;
      }
      
      .logos img {
        height: 60px;
      }
      
      .game-stats {
        flex-direction: column;
        gap: 10px;
      }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-5px); }
      40%, 80% { transform: translateX(5px); }
    }
    
    .shake {
      animation: shake 0.5s;
    }
  </style>
</head>
<body class="light">
  <div class="container">
    <div class="header">
      <button class="theme-toggle" id="themeToggle">🌙</button>
      <div class="logos">
        <img src="1.png" alt="Logo 1">
        <img src="2.jpg" alt="Logo 2">
        <img src="3.png" alt="Logo 3">

      </div>
      <h1>مسابقة أسبوع الآلام</h1>
    </div>

    <!-- باقي الكود كما هو بدون تغيير -->
    <div id="welcome" class="content">
      <p>أدخل اسم الفريق وكود الخادم لبدء اللعبة</p>
      <input type="text" id="teamName" placeholder="اسم الفريق">
      <input type="password" id="teamCode" placeholder="كود الخادم">
      <button class="btn" onclick="goToRules()">ابدأ المسابقة</button>
    </div>

    <!-- Rules Page -->
    <div id="rules" class="content hidden">
      <h2>قواعد المسابقة</h2>
      <ul class="rules-list">
        <li>لديك وقت محدد للإجابة على جميع الأسئلة</li>
        <li>تمتلك 3 محاولات فقط للإجابة</li>
        <li>الإجابة الخاطئة تخفض الوقت أو عدد المحاولات</li>
        <li>كل سؤال له نقاط، الإجابة الصحيحة من أول مرة تعطيك النقاط كاملة</li>
        <li>بعد كل إجابة صحيحة تظهر ملاحظة توضيحية</li>
        <li>يمكنك كشف تلميح مقابل خصم جزء من الوقت</li>
      </ul>
      <button class="btn" onclick="startGame()">بدء المسابقة</button>
    </div>

    <!-- Game Page -->
    <div id="game" class="content hidden">
      <div class="game-stats">
        <div class="stat">
          ⏳ <span id="time">120</span> ثانية
        </div>
        <div class="stat">
          ❤️ <span id="livesCount">3</span> محاولات
        </div>
        <div class="stat">
          ⭐ <span id="score">0</span> نقاط
        </div>
      </div>
      
      <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
      </div>
      
      <div class="question-container">
        <h2 id="questionText"></h2>
        <img id="questionImage" class="question-image hidden" alt="صورة السؤال">
        <p>النقاط: <strong id="questionPoints"></strong></p>
        
        <div class="options" id="options"></div>
        
        <button id="hintBtn" class="btn btn-outline" onclick="showHint()">
          🔍 كشف تلميح (-15 ثانية)
        </button>
        
        <div id="hint" class="hint-container hidden"></div>
        
        <div id="feedback" class="feedback hidden"></div>
      </div>
      
      <div class="nav-buttons">
        <button id="prevBtn" class="btn btn-outline hidden" onclick="prevQuestion()">
          السابق
        </button>
        <button id="nextBtn" class="btn hidden" onclick="nextQuestion()">
          التالي
        </button>
        <button id="finishBtn" class="btn hidden" onclick="confirmEnd()">
          إنهاء المسابقة
        </button>
      </div>
    </div>

    <!-- End Page -->
    <div id="end" class="content hidden">
      <h2>انتهت المسابقة!</h2>
      <div id="finalScore" style="margin: 25px 0;"></div>
      <button class="btn" onclick="reviewQuestions()">مراجعة الأسئلة</button>
      <button class="btn btn-outline" onclick="location.reload()">مسابقة جديدة</button>
    </div>
  </div>

  <script>
    // الأسئلة
    const questions = [
      {
        text: "في يوم أحد الشعانين، دخل المسيح أورشليم راكبًا على:",
        options: ["حصان", "جمل", "جحش", "عربة"],
        answer: 2,
        note: "دخل المسيح أورشليم راكبًا على جحش ليعلن تواضعه.",
        hint: "فكّر في رمز التواضع لا القوة.",
        points: 10,
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMRw9vIKLxybMKIm_A-rO8gIAsPheQhyWVdg&s"
      },
      {
        text: "رتب هذه الأحداث: (أ) العشاء الأخير (ب) القبض على المسيح (ج) غسل الأرجل",
        options: ["أ-ب-ج", "ج-أ-ب", "ب-أ-ج", "أ-ج-ب"],
        answer: 1,
        note: "المسيح غسل الأرجل ثم العشاء الأخير ثم القبض عليه.",
        hint: "تبدأ بالخدمة والتواضع قبل العشاء.",
        points: 20,
        image: ""
      },
      {
        text: "في وسط الكنيسة خلال أسبوع الآلام، توجد صورة المسيح مع 3 شموع... ما معنى هذه الشموع؟",
        options: [
          "باكر – تسبحة – مزمور",
          "العهد القديم – المزامير – العهد الجديد",
          "الكنيسة – الشعب – الكاهن",
          "الآلام – القيامة – التجسد"
        ],
        answer: 1,
        note: "تمثل الشموع الثلاثة العهد القديم، المزامير، والعهد الجديد.",
        hint: "تخيل كتاب فيه 3 أبواب: الأول وعود الله، الثاني تسبيح، الثالث مجيء المخلص.",
        points: 15,
        image: ""
      }
    ];

    // متغيرات اللعبة
    let currentQuestion = 0;
    let score = 0;
    let lives = 3;
    let totalTime = 120;
    let time = totalTime;
    let timer;
    let teamName = "";
    let teamCode = "";
    let answeredCorrectly = Array(questions.length).fill(false);
    let firstAttempt = Array(questions.length).fill(true);
    let usedHint = Array(questions.length).fill(false);

    // عناصر الصفحة
    const themeToggle = document.getElementById('themeToggle');
    
    // تبديل الثيم
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      document.body.classList.toggle('light');
      themeToggle.textContent = document.body.classList.contains('dark') ? '🌞' : '🌙';
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });

    // تحميل الثيم المحفوظ
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
      document.body.classList.remove('light');
      themeToggle.textContent = '🌞';
    } else {
      document.body.classList.add('light');
      document.body.classList.remove('dark');
      themeToggle.textContent = '🌙';
    }

    // باقي دوال اللعبة كما هي بدون تغيير
    function goToRules() {
      teamName = document.getElementById('teamName').value.trim();
      teamCode = document.getElementById('teamCode').value.trim();
      
      if (!teamName) {
        alert('الرجاء إدخال اسم الفريق');
        return;
      }
      
      document.getElementById('welcome').classList.add('hidden');
      document.getElementById('rules').classList.remove('hidden');
    }
    
    function startGame() {
      document.getElementById('rules').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      loadQuestion();
      startTimer();
    }
    
    function startTimer() {
      clearInterval(timer);
      timer = setInterval(() => {
        time--;
        updateGameStats();
        
        if (time <= 0) {
          endGame();
        }
      }, 1000);
    }
    
    function updateGameStats() {
      document.getElementById('time').textContent = time;
      document.getElementById('livesCount').textContent = lives;
      document.getElementById('score').textContent = score;
      document.getElementById('progress').style.width = `${(time / totalTime) * 100}%`;
    }
    
    function loadQuestion() {
      const q = questions[currentQuestion];
      const questionEl = document.getElementById('questionText');
      const optionsEl = document.getElementById('options');
      const imageEl = document.getElementById('questionImage');
      
      questionEl.textContent = q.text;
      document.getElementById('questionPoints').textContent = q.points;
      
      if (q.image) {
        imageEl.src = q.image;
        imageEl.classList.remove('hidden');
      } else {
        imageEl.classList.add('hidden');
      }
      
      optionsEl.innerHTML = '';
      q.options.forEach((option, index) => {
        const optionEl = document.createElement('div');
        optionEl.classList.add('option');
        optionEl.textContent = option;
        optionEl.onclick = () => checkAnswer(index, optionEl);
        optionsEl.appendChild(optionEl);
      });
      
      document.getElementById('hint').classList.add('hidden');
      document.getElementById('feedback').classList.add('hidden');
      document.getElementById('hintBtn').disabled = answeredCorrectly[currentQuestion] || usedHint[currentQuestion];
      
      updateNavButtons();
    }
    
    function checkAnswer(selectedIndex, optionEl) {
      const q = questions[currentQuestion];
      const feedbackEl = document.getElementById('feedback');
      
      if (selectedIndex === q.answer) {
        // إجابة صحيحة
        optionEl.classList.add('correct');
        feedbackEl.textContent = q.note;
        feedbackEl.classList.add('correct');
        feedbackEl.classList.remove('hidden');
        
        if (!answeredCorrectly[currentQuestion]) {
          const points = firstAttempt[currentQuestion] ? q.points : Math.floor(q.points / 2);
          score += points;
          answeredCorrectly[currentQuestion] = true;
          updateGameStats();
        }
        
        disableOptions();
      } else {
        // إجابة خاطئة
        optionEl.classList.add('wrong');
        document.querySelector('.container').classList.add('shake');
        setTimeout(() => {
          document.querySelector('.container').classList.remove('shake');
        }, 500);
        
        firstAttempt[currentQuestion] = false;
        lives--;
        time -= 10;
        
        if (lives <= 0) {
          endGame();
        }
        
        updateGameStats();
      }
      
      updateNavButtons();
    }
    
    function disableOptions() {
      document.querySelectorAll('.option').forEach(opt => {
        opt.style.pointerEvents = 'none';
      });
    }
    
    function showHint() {
      if (usedHint[currentQuestion] || answeredCorrectly[currentQuestion]) return;
      
      time -= 15;
      if (time < 0) time = 0;
      
      usedHint[currentQuestion] = true;
      document.getElementById('hint').textContent = questions[currentQuestion].hint;
      document.getElementById('hint').classList.remove('hidden');
      document.getElementById('hintBtn').disabled = true;
      
      updateGameStats();
    }
    
    function updateNavButtons() {
      document.getElementById('prevBtn').classList.toggle('hidden', currentQuestion === 0);
      document.getElementById('nextBtn').classList.toggle('hidden', 
        !answeredCorrectly[currentQuestion] || currentQuestion === questions.length - 1);
      document.getElementById('finishBtn').classList.toggle('hidden', 
        currentQuestion !== questions.length - 1 || !answeredCorrectly[currentQuestion]);
    }
    
    function nextQuestion() {
      currentQuestion++;
      loadQuestion();
    }
    
    function prevQuestion() {
      currentQuestion--;
      loadQuestion();
    }
    
    function confirmEnd() {
      if (confirm('هل تريد إنهاء المسابقة الآن؟')) {
        endGame();
      }
    }
    
    function endGame() {
      clearInterval(timer);
      
      const totalPoints = questions.reduce((sum, q) => sum + q.points, 0);
      const finalScoreEl = document.getElementById('finalScore');
      
      finalScoreEl.innerHTML = `
        <p><strong>اسم الفريق:</strong> ${teamName}</p>
        <p><strong>النقاط:</strong> ${score} من ${totalPoints}</p>
        <p><strong>الوقت المتبقي:</strong> ${time} ثانية</p>
        <p><strong>المحاولات المتبقية:</strong> ${lives}</p>
      `;
      
      document.getElementById('game').classList.add('hidden');
      document.getElementById('end').classList.remove('hidden');
    }
    
    function reviewQuestions() {
      document.getElementById('end').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      currentQuestion = 0;
      loadQuestion();
    }
  </script>
</body>
</html>
